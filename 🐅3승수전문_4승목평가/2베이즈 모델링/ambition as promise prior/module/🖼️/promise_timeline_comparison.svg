<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600">
  <!-- 배경 -->
  <rect width="1200" height="600" fill="#f9f9f9"/>
  
  <!-- 제목 -->
  <text x="600" y="30" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">
    Promise Architecture: Point Mass vs Distributional
  </text>
  
  <!-- 왼쪽: 점 약속 (Point Mass Promise) -->
  <g id="point-mass">
    <text x="300" y="70" font-size="18" font-weight="bold" text-anchor="middle" fill="#d9534f">
      Point Mass Promise
    </text>
    
    <!-- 시간 축 -->
    <line x1="100" y1="100" x2="500" y2="100" stroke="#333" stroke-width="2"/>
    <text x="100" y="95" font-size="14" text-anchor="middle">t</text>
    <text x="300" y="95" font-size="14" text-anchor="middle">t+1</text>
    <text x="500" y="95" font-size="14" text-anchor="middle">t+2</text>
    
    <!-- t: 시뮬레이션 -->
    <rect x="50" y="120" width="100" height="80" fill="#ffebee" stroke="#d9534f" stroke-width="2" rx="5"/>
    <text x="100" y="145" font-size="12" text-anchor="middle" font-weight="bold">Simulate</text>
    <text x="100" y="165" font-size="11" text-anchor="middle">Promise to</text>
    <text x="100" y="180" font-size="11" text-anchor="middle">Sell &amp; Deliver</text>
    <text x="100" y="195" font-size="11" text-anchor="middle">φ = fixed</text>
    
    <!-- t+1: 보정 -->
    <rect x="250" y="120" width="100" height="80" fill="#fff3cd" stroke="#ffc107" stroke-width="2" rx="5"/>
    <text x="300" y="145" font-size="12" text-anchor="middle" font-weight="bold">Calibrate</text>
    <text x="300" y="165" font-size="11" text-anchor="middle">Observe S, D</text>
    <text x="300" y="180" font-size="11" text-anchor="middle">Update μ</text>
    <text x="300" y="195" font-size="11" text-anchor="middle" fill="#d9534f">τ rigid!</text>
    
    <!-- t+2: 실현 -->
    <rect x="450" y="120" width="100" height="80" fill="#d4edda" stroke="#28a745" stroke-width="2" rx="5"/>
    <text x="500" y="145" font-size="12" text-anchor="middle" font-weight="bold">Realize</text>
    <text x="500" y="165" font-size="11" text-anchor="middle">S=1, D=1</text>
    <text x="500" y="180" font-size="11" text-anchor="middle">C = S × D</text>
    <text x="500" y="195" font-size="11" text-anchor="middle" fill="#d9534f">No pivot!</text>
    
    <!-- Beta 분포 시각화 -->
    <g transform="translate(100, 250)">
      <text x="0" y="0" font-size="14" font-weight="bold">μ=0.8, τ=100</text>
      <rect x="-5" y="10" width="10" height="80" fill="#d9534f" opacity="0.7"/>
      <line x1="-50" y1="90" x2="50" y2="90" stroke="#666" stroke-width="1"/>
      <text x="0" y="110" font-size="12" text-anchor="middle">Narrow!</text>
    </g>
    
    <g transform="translate(300, 250)">
      <text x="0" y="0" font-size="14" font-weight="bold">μ=0.75, τ=95</text>
      <rect x="-5" y="10" width="10" height="75" fill="#ffc107" opacity="0.7"/>
      <line x1="-50" y1="90" x2="50" y2="90" stroke="#666" stroke-width="1"/>
      <text x="0" y="110" font-size="12" text-anchor="middle">Still narrow</text>
    </g>
    
    <g transform="translate(500, 250)">
      <text x="0" y="0" font-size="14" font-weight="bold">Fixed!</text>
      <rect x="-3" y="10" width="6" height="80" fill="#28a745" opacity="0.7"/>
      <line x1="-50" y1="90" x2="50" y2="90" stroke="#666" stroke-width="1"/>
      <text x="0" y="110" font-size="12" text-anchor="middle">Prison</text>
    </g>
    
    <!-- 화살표 -->
    <path d="M 170 160 L 230 160" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    <path d="M 370 160 L 430 160" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- 학습 함정 표시 -->
    <text x="300" y="400" font-size="14" text-anchor="middle" fill="#d9534f" font-weight="bold">
      Learning Trap: |Δμ| &lt; ε/(τ+1) ≈ 0
    </text>
  </g>
  
  <!-- 오른쪽: 분포적 약속 (Distributional Promise) -->
  <g id="distributional">
    <text x="900" y="70" font-size="18" font-weight="bold" text-anchor="middle" fill="#28a745">
      Distributional Promise
    </text>
    
    <!-- 시간 축 -->
    <line x1="700" y1="100" x2="1100" y2="100" stroke="#333" stroke-width="2"/>
    <text x="700" y="95" font-size="14" text-anchor="middle">t</text>
    <text x="900" y="95" font-size="14" text-anchor="middle">t+1</text>
    <text x="1100" y="95" font-size="14" text-anchor="middle">t+2</text>
    
    <!-- t: 시뮬레이션 -->
    <rect x="650" y="120" width="100" height="80" fill="#e8f5e9" stroke="#28a745" stroke-width="2" rx="5"/>
    <text x="700" y="145" font-size="12" text-anchor="middle" font-weight="bold">Simulate</text>
    <text x="700" y="165" font-size="11" text-anchor="middle">Promise to</text>
    <text x="700" y="180" font-size="11" text-anchor="middle">Sell &amp; Deliver</text>
    <text x="700" y="195" font-size="11" text-anchor="middle">φ ~ Beta</text>
    
    <!-- t+1: 보정 -->
    <rect x="850" y="120" width="100" height="80" fill="#fff3cd" stroke="#ffc107" stroke-width="2" rx="5"/>
    <text x="900" y="145" font-size="12" text-anchor="middle" font-weight="bold">Calibrate</text>
    <text x="900" y="165" font-size="11" text-anchor="middle">Observe S, D</text>
    <text x="900" y="180" font-size="11" text-anchor="middle">Update μ, τ</text>
    <text x="900" y="195" font-size="11" text-anchor="middle" fill="#28a745">Flexible!</text>
    
    <!-- t+2: 실현 -->
    <rect x="1050" y="120" width="100" height="80" fill="#d4edda" stroke="#28a745" stroke-width="2" rx="5"/>
    <text x="1100" y="145" font-size="12" text-anchor="middle" font-weight="bold">Realize</text>
    <text x="1100" y="165" font-size="11" text-anchor="middle">S=1, D=1</text>
    <text x="1100" y="180" font-size="11" text-anchor="middle">C = S × D</text>
    <text x="1100" y="195" font-size="11" text-anchor="middle" fill="#28a745">Can pivot!</text>
    
    <!-- Beta 분포 시각화 -->
    <g transform="translate(700, 250)">
      <text x="0" y="0" font-size="14" font-weight="bold">μ=0.3, τ=5</text>
      <path d="M -40 80 Q -20 20, 0 30 Q 20 40, 40 80" fill="#28a745" opacity="0.3" stroke="#28a745" stroke-width="2"/>
      <line x1="-50" y1="90" x2="50" y2="90" stroke="#666" stroke-width="1"/>
      <text x="0" y="110" font-size="12" text-anchor="middle">Wide σ²=0.04</text>
    </g>
    
    <g transform="translate(900, 250)">
      <text x="0" y="0" font-size="14" font-weight="bold">μ=0.35, τ=10</text>
      <path d="M -35 80 Q -15 30, 0 35 Q 15 40, 35 80" fill="#ffc107" opacity="0.3" stroke="#ffc107" stroke-width="2"/>
      <line x1="-50" y1="90" x2="50" y2="90" stroke="#666" stroke-width="1"/>
      <text x="0" y="110" font-size="12" text-anchor="middle">σ²=0.02</text>
    </g>
    
    <g transform="translate(1100, 250)">
      <text x="0" y="0" font-size="14" font-weight="bold">μ=0.4, τ=20</text>
      <path d="M -25 80 Q -10 40, 0 45 Q 10 50, 25 80" fill="#28a745" opacity="0.3" stroke="#28a745" stroke-width="2"/>
      <line x1="-50" y1="90" x2="50" y2="90" stroke="#666" stroke-width="1"/>
      <text x="0" y="110" font-size="12" text-anchor="middle">Paradise</text>
    </g>
    
    <!-- 화살표 -->
    <path d="M 770 160 L 830 160" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    <path d="M 970 160 L 1030 160" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- 전용 공간 표시 -->
    <text x="900" y="400" font-size="14" text-anchor="middle" fill="#28a745" font-weight="bold">
      Exaptation Space: σ² = μ(1-μ)/(τ+1) &gt; 0.02
    </text>
  </g>
  
  <!-- 하단 수식 -->
  <g transform="translate(600, 450)">
    <rect x="-150" y="-5" width="300" height="120" fill="#f0f0f0" stroke="#666" stroke-width="1" rx="5"/>
    <text x="0" y="20" font-size="16" font-weight="bold" text-anchor="middle">Key Formulas</text>
    <text x="0" y="45" font-size="12" text-anchor="middle">C = S × D (Calibrated Success)</text>
    <text x="0" y="65" font-size="12" text-anchor="middle">μ* = 1/(n+1) (Optimal Aspiration)</text>
    <text x="0" y="85" font-size="12" text-anchor="middle">σ² = μ(1-μ)/(τ+1) (Innovation Space)</text>
    <text x="0" y="105" font-size="12" text-anchor="middle">F/E = #T/#X (Flexibility Ratio)</text>
  </g>
  
  <!-- 화살표 마커 정의 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666"/>
    </marker>
  </defs>
</svg>