<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moderator Bake-off Report</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
        }
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
        }
        .section {
            background: white;
            padding: 30px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h2 {
            color: #667eea;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        h3 {
            color: #764ba2;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #667eea;
            color: white;
            font-weight: bold;
        }
        tr:hover {
            background-color: #f5f5f5;
        }
        .metric {
            display: inline-block;
            background: #e7f3ff;
            padding: 10px 20px;
            border-radius: 5px;
            margin: 5px;
        }
        .winner {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.3em;
            margin: 20px 0;
        }
        .plot {
            text-align: center;
            margin: 20px 0;
        }
        .plot img {
            max-width: 100%;
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .risk-high {
            color: #e74c3c;
            font-weight: bold;
        }
        .risk-medium {
            color: #f39c12;
            font-weight: bold;
        }
        .risk-low {
            color: #27ae60;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Moderator Bake-off Report</h1>
        <p>Integration Cost vs Founder Credibility - Decision Memo for H2</p>
        <p>Generated: 2025-10-29 10:31:06</p>
    </div>

    <div class="section">
        <h2>1. Executive Summary</h2>
        <p>This report compares two alternative moderators for H2:</p>
        <ul>
            <li><strong>H2-Architecture</strong>: Integration Cost (is_hardware)</li>
            <li><strong>H2-Alt (Credibility)</strong>: Founder Credibility (is_serial)</li>
        </ul>
        <p>Both models use identical specifications except for the moderator, evaluated on:</p>
        <ul>
            <li>Data Quality (40%): Distribution balance, sample sizes</li>
            <li>Statistical Evidence (40%): Significance, model fit</li>
            <li>Theory Fit (20%): Sign consistency, interpretability</li>
        </ul>
    </div>

    <div class="section">
        <h2>2. Data Quality Assessment</h2>

        <h3>Moderator Balance</h3>
        <table>
            <tr>
                <th>Moderator</th>
                <th>Minority %</th>
                <th>Minority N</th>
                <th>Majority N</th>
                <th>Risk Level</th>
            </tr>
            <tr>
                <td>is_hardware (Architecture)</td>
                <td>14.2%</td>
                <td>712</td>
                <td>4,288</td>
                <td class="risk-medium">🟡 MEDIUM RISK</td>
            </tr>
            <tr>
                <td>is_serial (Credibility)</td>
                <td>24.4%</td>
                <td>1,220</td>
                <td>3,780</td>
                <td class="risk-low">🟢 LOW RISK</td>
            </tr>
        </table>

        <div class="plot">
            <img src="outputs/bakeoff/univariate_distributions.png" alt="Univariate Distributions">
        </div>
    </div>

    <div class="section">
        <h2>3. H2-Architecture (is_hardware)</h2>

        <h3>Model Results</h3>
        <div class="metric">N = 5,000</div>
        <div class="metric">Pseudo R² = 0.0186</div>
        <div class="metric">AIC = 3961.5</div>
        <div class="metric">Interaction Coef = -0.3597</div>
        <div class="metric">p-value = 0.0026</div>

        <h3>Coefficient Table</h3>
        <table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>variable</th>
      <th>coefficient</th>
      <th>std_err</th>
      <th>z</th>
      <th>p_value</th>
      <th>ci_lower</th>
      <th>ci_upper</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Intercept</td>
      <td>-1.7669</td>
      <td>0.0782</td>
      <td>-22.6038</td>
      <td>0.0000</td>
      <td>-1.9201</td>
      <td>-1.6137</td>
    </tr>
    <tr>
      <td>C(founding_cohort)[T.2019-20]</td>
      <td>-0.1011</td>
      <td>0.1081</td>
      <td>-0.9353</td>
      <td>0.3496</td>
      <td>-0.3130</td>
      <td>0.1108</td>
    </tr>
    <tr>
      <td>C(founding_cohort)[T.2021+]</td>
      <td>-0.2493</td>
      <td>0.1376</td>
      <td>-1.8123</td>
      <td>0.0699</td>
      <td>-0.5189</td>
      <td>0.0203</td>
    </tr>
    <tr>
      <td>C(founding_cohort)[T.≤2016]</td>
      <td>-0.0665</td>
      <td>0.1079</td>
      <td>-0.6166</td>
      <td>0.5375</td>
      <td>-0.2780</td>
      <td>0.1449</td>
    </tr>
    <tr>
      <td>z_vagueness</td>
      <td>0.3316</td>
      <td>0.0457</td>
      <td>7.2517</td>
      <td>0.0000</td>
      <td>0.2420</td>
      <td>0.4212</td>
    </tr>
    <tr>
      <td>is_hardware</td>
      <td>-0.1462</td>
      <td>0.1239</td>
      <td>-1.1801</td>
      <td>0.2380</td>
      <td>-0.3890</td>
      <td>0.0966</td>
    </tr>
    <tr>
      <td>z_vagueness:is_hardware</td>
      <td>-0.3597</td>
      <td>0.1193</td>
      <td>-3.0156</td>
      <td>0.0026</td>
      <td>-0.5935</td>
      <td>-0.1259</td>
    </tr>
    <tr>
      <td>z_employees_log</td>
      <td>0.1523</td>
      <td>0.0415</td>
      <td>3.6688</td>
      <td>0.0002</td>
      <td>0.0709</td>
      <td>0.2337</td>
    </tr>
  </tbody>
</table>

        <h3>Interaction Plot</h3>
        <div class="plot">
            <img src="outputs/bakeoff/h2_interaction_architecture.png" alt="Architecture Interaction">
        </div>
    </div>

    <div class="section">
        <h2>4. H2-Credibility (is_serial)</h2>

        <h3>Model Results</h3>
        <div class="metric">N = 5,000</div>
        <div class="metric">Pseudo R² = 0.0157</div>
        <div class="metric">AIC = 3973.2</div>
        <div class="metric">Interaction Coef = -0.0110</div>
        <div class="metric">p-value = 0.9100</div>

        <h3>Coefficient Table</h3>
        <table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>variable</th>
      <th>coefficient</th>
      <th>std_err</th>
      <th>z</th>
      <th>p_value</th>
      <th>ci_lower</th>
      <th>ci_upper</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Intercept</td>
      <td>-1.7917</td>
      <td>0.0797</td>
      <td>-22.4730</td>
      <td>0.0000</td>
      <td>-1.9480</td>
      <td>-1.6354</td>
    </tr>
    <tr>
      <td>C(founding_cohort)[T.2019-20]</td>
      <td>-0.0953</td>
      <td>0.1080</td>
      <td>-0.8826</td>
      <td>0.3775</td>
      <td>-0.3070</td>
      <td>0.1163</td>
    </tr>
    <tr>
      <td>C(founding_cohort)[T.2021+]</td>
      <td>-0.2490</td>
      <td>0.1375</td>
      <td>-1.8111</td>
      <td>0.0701</td>
      <td>-0.5184</td>
      <td>0.0205</td>
    </tr>
    <tr>
      <td>C(founding_cohort)[T.≤2016]</td>
      <td>-0.0703</td>
      <td>0.1078</td>
      <td>-0.6526</td>
      <td>0.5140</td>
      <td>-0.2815</td>
      <td>0.1409</td>
    </tr>
    <tr>
      <td>z_vagueness</td>
      <td>0.2808</td>
      <td>0.0485</td>
      <td>5.7892</td>
      <td>0.0000</td>
      <td>0.1858</td>
      <td>0.3759</td>
    </tr>
    <tr>
      <td>is_serial</td>
      <td>0.0325</td>
      <td>0.0975</td>
      <td>0.3336</td>
      <td>0.7387</td>
      <td>-0.1586</td>
      <td>0.2236</td>
    </tr>
    <tr>
      <td>z_vagueness:is_serial</td>
      <td>-0.0110</td>
      <td>0.0973</td>
      <td>-0.1130</td>
      <td>0.9100</td>
      <td>-0.2016</td>
      <td>0.1797</td>
    </tr>
    <tr>
      <td>z_employees_log</td>
      <td>0.1514</td>
      <td>0.0415</td>
      <td>3.6512</td>
      <td>0.0003</td>
      <td>0.0701</td>
      <td>0.2327</td>
    </tr>
  </tbody>
</table>

        <h3>Interaction Plot</h3>
        <div class="plot">
            <img src="outputs/bakeoff/h2_interaction_founder.png" alt="Founder Interaction">
        </div>
    </div>

    <div class="section">
        <h2>5. Head-to-Head Comparison</h2>

        <h3>Decision Scorecard</h3>
        <table>
            <tr>
                <th>Criterion</th>
                <th>Architecture</th>
                <th>Credibility</th>
            </tr>
            <tr>
                <td>Data Quality: Balance (10pt)</td>
                <td>5.0</td>
                <td>10.0</td>
            </tr>
            <tr>
                <td>Statistical: Significance (10pt)</td>
                <td>10.0</td>
                <td>0.0</td>
            </tr>
            <tr>
                <td>Statistical: Model Fit (10pt)</td>
                <td>1.9</td>
                <td>1.6</td>
            </tr>
            <tr>
                <td>Theory: Sign Consistency (10pt)</td>
                <td>10.0</td>
                <td>10.0</td>
            </tr>
            <tr style="background-color: #f0f0f0; font-weight: bold;">
                <td>TOTAL SCORE (Weighted)</td>
                <td>6.4/10</td>
                <td>6.3/10</td>
            </tr>
        </table>

        <h3>Detailed Metrics</h3>
        <table>
            <tr>
                <th>Dimension</th>
                <th>Architecture</th>
                <th>Credibility</th>
            </tr>
            <tr>
                <td>Sample Balance</td>
                <td>MEDIUM</td>
                <td>LOW</td>
            </tr>
            <tr>
                <td>Minority Class %</td>
                <td>14.2%</td>
                <td>24.4%</td>
            </tr>
            <tr>
                <td>Interaction Coef</td>
                <td>-0.3597</td>
                <td>-0.0110</td>
            </tr>
            <tr>
                <td>Interaction p-value</td>
                <td>0.0026</td>
                <td>0.9100</td>
            </tr>
            <tr>
                <td>Pseudo R²</td>
                <td>0.019</td>
                <td>0.016</td>
            </tr>
            <tr>
                <td>AIC</td>
                <td>3961.5</td>
                <td>3973.2</td>
            </tr>
            <tr>
                <td>Sign Consistency</td>
                <td>✓</td>
                <td>✓</td>
            </tr>
        </table>
    </div>

    <div class="winner">
        <h2 style="margin: 0;">🏆 WINNER: Architecture (is_hardware)</h2>
        <p style="margin: 10px 0 0 0;">Score: 6.4 vs 6.3 (margin: 0.1 points)</p>
    </div>

    <div class="section">
        <h2>6. Decision & Recommendation</h2>
        <h3>Rationale</h3>
        <p><strong>Key Findings:</strong></p>
        <ul>
            <li>Architecture shows stronger overall performance</li>
            <li>Data balance: Architecture (14.2%) vs Credibility (24.4%)</li>
            <li>Statistical significance: Architecture (p=0.0026) vs Credibility (p=0.9100)</li>
            <li>Model fit: Architecture (R²=0.019) vs Credibility (R²=0.016)</li>
        </ul>

        <h3>Next Steps</h3>
        <ol>
            <li>Adopt <strong>Architecture (is_hardware)</strong> as primary H2 moderator for main paper</li>
            <li>Report alternative as robustness check in appendix</li>
            <li>Develop theoretical narrative emphasizing the winning moderator</li>
            <li>Create interaction plots and marginal effects for main text</li>
        </ol>
    </div>

    <div class="section">
        <h2>7. Reproducibility</h2>
        <p><strong>Analysis Pipeline:</strong></p>
        <pre style="background: #f5f5f5; padding: 15px; border-radius: 5px; overflow-x: auto;">
cd "Front/On/love(cs)/strategic ambiguity/empirics"

# Generate synthetic data (or use real data)
python generate_synthetic_data.py

# Fit bake-off models
python run_bakeoff_models.py

# Generate visualizations
python -c "
import sys; sys.path.insert(0, 'modules')
from plots import *
from pathlib import Path
import pandas as pd
outdir = Path('outputs/bakeoff')
outdir.mkdir(parents=True, exist_ok=True)
df = pd.read_csv('outputs/h2_analysis_dataset.csv')
save_univariate_distributions(df, outdir)
save_h2_interaction_architecture(df, outdir)
save_h2_interaction_founder(df, outdir)
"

# Generate report
python generate_bakeoff_report.py
        </pre>
    </div>

</body>
</html>