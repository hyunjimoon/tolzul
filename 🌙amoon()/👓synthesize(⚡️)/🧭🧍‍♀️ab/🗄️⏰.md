[[üóÑÔ∏èüëÅÔ∏èüß†explain_away]]

| Section                  | Subsection                                   | üéØ Target                                                                                                                                                                                                                                                                                                                                                    | üß±Algorithm Brick                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | üîëKey in üó£Ô∏èlanguage, üéûÔ∏èplots, üóÑÔ∏ètable                                                                                                                                                                                                                                                                                                                                                                                                               |
| ------------------------ | -------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| üìùentire                 |                                              | **Input:** <span style="color: green">Action/sample time ratio (r)</span>, <span style="color: orange">Samples (k)</span>, <span style="color: SkyBlue">True probability (p)</span><br>**Output:** Optimal samples <span style="color: orange">k*</span><br>**Goal:** Maximize utility rate over time<br>**Logic:** Balance accuracy vs speed trade-off i.e. | **Core Model:**<br><br>1Ô∏è‚É£ Decision Quality (Q):<br>Q(<span style="color: orange">k</span>,<span style="color: SkyBlue">p</span>) = q<span style="color: SkyBlue">p</span> + (1-q)(1-<span style="color: SkyBlue">p</span>) where:<br>- q = 1 - Binomial_cdf(<span style="color: orange">k</span>/2, <span style="color: orange">k</span>, <span style="color: SkyBlue">p</span>)<br>- <span style="color: SkyBlue">p</span> ~ Uniform(0.5, 1.0)<br><br>2Ô∏è‚É£ Time Cost (T):<br>T(<span style="color: orange">k</span>,<span style="color: green">r</span>) = <span style="color: green">r</span> + <span style="color: orange">k</span> where:<br>- <span style="color: green">r</span> = action_time/sample_time<br>- <span style="color: orange">k</span> = number of samples<br><br>3Ô∏è‚É£ Utility Rate (R):<br>R(<span style="color: orange">k</span>,<span style="color: green">r</span>) = Q(<span style="color: orange">k</span>,<span style="color: SkyBlue">p</span>) x 1 / T(<span style="color: orange">k</span>,<span style="color: green">r</span>)<br><br>4Ô∏è‚É£ Optimal <span style="color: orange">k</span>:<br><span style="color: orange">k</span> * = argmax R(<span style="color: orange">k</span>,<span style="color: green">r</span>)<br><br><br>utility rate (UR) = Decision Quality (DQ) / Time Cost (TC) where: DQ is a function of p (true state probability) and k (number of samples), TC includes both sampling time and action time, k is adaptively determined based on the environment's cost structure (A2S ratio) | üó£Ô∏èThree key mechanisms:<br>1. Majority voting from <span style="color: orange">k</span> samples<br>2. Uniform prior over <span style="color: SkyBlue">p</span><br>3. Linear time cost<br><br>üéûÔ∏èThree key plots:<br>1. Q(<span style="color: orange">k</span>) - diminishing returns<br>2. 1/T(<span style="color: orange">k</span>) - hyperbolic decay<br>3. R(<span style="color: orange">k</span>) - optimal <span style="color: orange">k</span>* |
| 1. Model Components      |                                              |                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ![[Pasted image 20241117061525.png\|100]]                                                                                                                                                                                                                                                                                                                                                                                                              |
|                          | 1.1 Decision Quality                         | Understand how sampling affects accuracy                                                                                                                                                                                                                                                                                                                     | **Majority Vote Model:**<br>- <span style="color: orange">k</span>=0: random guess (0.5)<br>- <span style="color: orange">k</span>>0: majority of <span style="color: orange">k</span> samples<br>- Average over <span style="color: SkyBlue">p</span>~U(0.5,1)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | üó£Ô∏èKey insights:<br>- First sample gives biggest gain<br>- Diminishing returns from more samples<br>- Averaged over all possible <span style="color: SkyBlue">p</span>                                                                                                                                                                                                                                                                                 |
|                          | 1.2 Time Cost                                | Model relationship between samples and decision time                                                                                                                                                                                                                                                                                                         | **Linear Cost Model:**<br>- Fixed action cost (<span style="color: green">r</span>)<br>- Linear sample cost (<span style="color: orange">k</span>)<br>- Total cost = <span style="color: green">r</span> + <span style="color: orange">k</span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | üó£Ô∏èKey insights:<br>- High <span style="color: green">r</span>: sampling cost negligible<br>- Low <span style="color: green">r</span>: sampling cost dominant<br>- Linear scaling with samples                                                                                                                                                                                                                                                         |
|                          | 1.3 Utility Rate                             | Combine quality and speed for net value                                                                                                                                                                                                                                                                                                                      | **Rate Optimization:**<br>- Quality per decision * Decisions per time<br>- Maximize over <span style="color: orange">k</span><br>- Different optima for different <span style="color: green">r</span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | üó£Ô∏èKey insights:<br>- Tradeoff between quality and speed<br>- Optimal <span style="color: orange">k</span>* varies with <span style="color: green">r</span><br>- Often <span style="color: orange">k</span>*=1 is optimal<br><br>![[Pasted image 20241117061537.png\|50]]                                                                                                                                                                              |
| 2. Industry Applications |                                              | How do different industries map to <span style="color: green">r</span>?                                                                                                                                                                                                                                                                                      | **Examples:**<br>- Software (<span style="color: green">r</span>‚âà1440): 1 day deploy, 1 min test<br>- Aircraft (<span style="color: green">r</span>‚âà4): 2 year build, 6 month test                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | üó£Ô∏èRepresentative ratios:<br>- Digital <span style="color: green">r</span>>100<br>- Physical <span style="color: green">r</span><10<br>- Hybrid 10<<span style="color: green">r</span><100                                                                                                                                                                                                                                                             |
| 3. Todo                  | extending from product to (product, process) |                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                        |



Key Patterns:
- Ratio Increases: When action involves system-wide changes or long-term commitments
- Ratio Decreases: When operations are modular or geographically concentrated

Would you like me to explain any specific category in more detail?

```{python}
def simulate_decision_quality(k, p):
    if k == 0:
        return 0.5
    prob_majority = 1 - binom.cdf(k//2, k, p)
    #
    #sample-based agent will be right with probability qp + (1-q)(1-p)
    return prob_majority * p + (1 - prob_majority) * (1-p)

def compute_expected_utility(k, action_sample_ratio, utility_correct=1.0, utility_incorrect=0.0):
    ps = np.linspace(0.5, 1.0, 100)
    avg_decision_quality = np.mean([simulate_decision_quality(k, p) for p in ps])
    
    utility_per_decision = avg_decision_quality * utility_correct + \
                         (1 - avg_decision_quality) * utility_incorrect
    
    time_per_decision = action_sample_ratio + k
    decisions_per_time = 1 / time_per_decision if time_per_decision > 0 else 1
    
    utility_per_time = utility_per_decision * decisions_per_time
    
    return utility_per_decision, decisions_per_time, utility_per_time

def find_optimal_samples(action_sample_ratio, utility_correct=1.0, utility_incorrect=0.0, max_k=50):
    ks = np.arange(0, max_k+1)
    utilities = [compute_expected_utility(k, action_sample_ratio, 
                                       utility_correct, utility_incorrect)[2] 
                for k in ks]
    return ks[np.argmax(utilities)]
```