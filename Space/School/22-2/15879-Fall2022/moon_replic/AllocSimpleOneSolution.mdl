{UTF-8}
Actual Supply[prd]=
	if then else(C Capacities[r1]>Indicated Supply[r1] :AND: C Capacities[r2]>Indicated Supply\
		[r2],Indicated Supply[prd],
	if then else(C Capacities[r1]<=Indicated Supply[r1] :AND: C Capacities[r2]<=Indicated Supply\
		[r2],C Capacities[prd],
	if then else(C Capacities[r1]>Indicated Supply[r1] :AND: C Capacities[r2]<=Indicated Supply\
		[r2],R1CarriesOver[prd],R2CarriesOver
	[prd])))
	~	
	~		|

Attractiveness[prd]=
	exp(P Price[prd]*PriceCoef+Q Quality[prd]*QualCoef)
	~	
	~		|

C Capacities[prd]=
	10,20
	~	
	~		|

Demand T=
	30
	~	
	~		|

Indicated Market Share[prd]=
	Attractiveness[prd]/sum(Attractiveness[prd!])
	~	
	~		|

Indicated Supply[prd]=
	Demand T*Indicated Market Share[prd]
	~	
	~		|

P Price[prd]=
	10,10
	~	
	~		|

prd:
	(r1-r2)
	~	
	~		|

PriceCoef=
	-0.05
	~	
	~		|

Q Quality[prd]=
	5, 5
	~	
	~		|

QualCoef=
	0.1
	~	
	~		|

R1CarriesOver[r2]=
	C Capacities[r2] ~~|
R1CarriesOver[r1]=
	Min(C Capacities[r1],Demand T-C Capacities[r2])
	~	
	~		|

R2CarriesOver[r1]=
	C Capacities[r1] ~~|
R2CarriesOver[r2]=
	Min(C Capacities[r2],Demand T-C Capacities[r1])
	~	
	~		|

********************************************************
	.Control
********************************************************~
		Simulation Control Parameters
	|

FINAL TIME  = 100
	~	Month
	~	The final time for the simulation.
	|

INITIAL TIME  = 0
	~	Month
	~	The initial time for the simulation.
	|

SAVEPER  = 
        TIME STEP 
	~	Month [0,?]
	~	The frequency with which output is stored.
	|

TIME STEP  = 1
	~	Month [0,?]
	~	The time step for the simulation.
	|

\\\---/// Sketch information - do not modify anything except names
V300  Do not put anything below this section - it will be ignored
*View 1
$192-192-192,0,Times New Roman|12||0-0-0|0-0-0|0-0-255|-1--1--1|-1--1--1|96,96,100,0
10,1,Demand T,340,227,34,11,8,3,0,0,0,0,0,0
10,2,P Price,391,369,24,11,8,3,0,0,0,0,0,0
10,3,Q Quality,557,406,32,11,8,3,0,0,0,0,0,0
10,4,Attractiveness,551,334,45,11,8,3,0,0,0,0,0,0
10,5,Indicated Market Share,614,270,56,19,8,3,0,0,0,0,0,0
10,6,Indicated Supply,669,223,53,11,8,3,0,0,0,0,0,0
10,7,Actual Supply,686,178,45,11,8,3,0,0,0,0,0,0
1,8,2,4,0,0,0,0,0,128,0,-1--1--1,,1|(453,355)|
1,9,3,4,0,0,0,0,0,128,0,-1--1--1,,1|(554,376)|
1,10,4,5,0,0,0,0,0,128,0,-1--1--1,,1|(573,310)|
1,11,5,6,0,0,0,0,0,128,0,-1--1--1,,1|(640,247)|
1,12,1,6,0,0,0,0,0,128,0,-1--1--1,,1|(488,225)|
1,13,6,7,0,0,0,0,0,128,0,-1--1--1,,1|(674,207)|
10,14,C Capacities,853,252,41,11,8,3,0,0,0,0,0,0
1,15,14,7,0,0,0,0,0,128,0,-1--1--1,,1|(775,217)|
10,16,PriceCoef,682,400,33,11,8,3,0,0,-1,0,0,0
1,17,16,4,0,0,0,0,0,64,0,-1--1--1,,1|(622,370)|
10,18,QualCoef,680,364,32,11,8,3,0,0,-1,0,0,0
1,19,18,4,0,0,0,0,0,64,0,-1--1--1,,1|(628,352)|
10,21,R1CarriesOver,634,116,49,11,8,3,0,0,-1,0,0,0
1,22,21,7,0,0,0,0,0,64,0,-1--1--1,,1|(655,141)|
1,25,1,21,0,0,0,0,0,128,0,-1--1--1,,1|(479,173)|
1,26,14,21,0,0,0,0,0,128,0,-1--1--1,,1|(749,187)|
10,31,R2CarriesOver,795,116,49,11,8,3,0,0,-1,0,0,0
1,32,14,31,0,0,0,0,0,64,0,-1--1--1,,1|(826,190)|
1,33,1,31,0,0,0,0,0,64,0,-1--1--1,,1|(554,174)|
1,34,31,7,0,0,0,0,0,64,0,-1--1--1,,1|(746,143)|
///---\\\
:L<%^E!@
1:Current.vdf
9:Current
15:0,0,0,0,0,0
19:100,0
27:2,
34:0,
4:Time
5:Actual Supply[prd]
35:Date
36:YYYY-MM-DD
37:2000
38:1
39:1
40:2
41:0
42:1
24:0
25:100
26:100
6:r1
6:r2
